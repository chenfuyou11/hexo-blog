include: "/etc/unbound/accelerated-domains.china.unbound.conf"
include: "/etc/unbound/apple.china.unbound.conf"
include: "/etc/unbound/google.china.unbound.conf"

server:
	# verbosity number, 0 is least verbose. 1 is default.
	verbosity: 1

	# number of threads to create. 1 disables threading.
	num-threads: 4

	# specify the interfaces to answer queries from by ip-address.
	interface: 0.0.0.0@5354
	interface: ::0@5354

	# Set this to yes to prefer ipv6 upstream servers over ipv4.
	prefer-ip6: no

	# number of outgoing simultaneous tcp buffers to hold per thread.
	outgoing-num-tcp: 1024

	# number of incoming simultaneous tcp buffers to hold per thread.
	incoming-num-tcp: 2048

	# buffer size for UDP port 53 incoming (SO_RCVBUF socket option).
	# 0 is system default.  Use 4m to catch query spikes for busy servers.
	so-rcvbuf: 8m

	# buffer size for UDP port 53 outgoing (SO_SNDBUF socket option).
	# 0 is system default.  Use 4m to handle spikes on very busy servers.
	so-sndbuf: 8m

	# use SO_REUSEPORT to distribute queries over threads.
	# at extreme load it could be better to turn it off to distribute even.
	so-reuseport: yes

	# Maximum UDP response size (not applied to TCP response).
	# Suggested values are 512 to 4096. Default is 4096. 65536 disables it.
	max-udp-size: 4096

	# buffer size for handling DNS data. No messages larger than this
	# size can be sent or received, by UDP or TCP. In bytes.
	msg-buffer-size: 65552

	# the amount of memory to use for the message cache.
	# plain value in bytes or you can append k, m or G. default is "4Mb".
	msg-cache-size: 128m

	# the number of queries that a thread gets to service.
	num-queries-per-thread: 2048

	# if very busy, 50% queries run to completion, 50% get timeout in msec
	jostle-timeout: 300

	# msec for waiting for an unknown server to reply.  Increase if you
	# are behind a slow satellite link, to eg. 1128.
	unknown-server-time-limit: 2000

	# the amount of memory to use for the RRset cache.
	# plain value in bytes or you can append k, m or G. default is "4Mb".
	rrset-cache-size: 512m

	# the number of slabs to use for the RRset cache.
	# the number of slabs must be a power of 2.
	# more slabs reduce lock contention, but fragment memory usage.
	rrset-cache-slabs: 4

	# the time to live (TTL) value lower bound, in seconds. Default 0.
	# If more than an hour could easily give trouble due to stale data.
	cache-min-ttl: 90

	# the time to live (TTL) value cap for RRsets and messages in the
	# cache. Items are not cached for longer. In seconds.
	cache-max-ttl: 86400

	# the time to live (TTL) value cap for negative responses in the cache
	cache-max-negative-ttl: 120

	# Enable IPv4, "yes" or "no".
	do-ip4: yes

	# Enable IPv6, "yes" or "no".
	do-ip6: yes

	# Enable UDP, "yes" or "no".
	do-udp: yes

	# Enable TCP, "yes" or "no".
	do-tcp: yes

	# upstream connections use TCP only (and no UDP), "yes" or "no"
	# useful for tunneling scenarios, default no.
	tcp-upstream: no

	# upstream connections also use UDP (even if do-udp is no).
	# useful if if you want UDP upstream, but don't provide UDP downstream.
	udp-upstream-without-downstream: no

	# Maximum segment size (MSS) of TCP socket on which the server
	# responds to queries. Default is 0, system default MSS.
	tcp-mss: 0

	# Maximum segment size (MSS) of TCP socket for outgoing queries.
	# Default is 0, system default MSS.
	outgoing-tcp-mss: 0

	# Idle TCP timeout, connection closed in milliseconds
	tcp-idle-timeout: 30000

	# control which clients are allowed to make (recursive) queries
	access-control: 0.0.0.0/0 allow
	access-control: ::0/0 allow

	# file to read root hints from.
	# get one from https://www.internic.net/domain/named.cache
	root-hints: "/etc/unbound/root.hints"

	# enable to not answer id.server and hostname.bind queries.
	hide-identity: no

	# enable to not answer version.server and version.bind queries.
	hide-version: no

	# enable to not answer trustanchor.unbound queries.
	hide-trustanchor: yes

	# the identity to report. Leave "" or default to return hostname.
	identity: "Arkua233's dns server"

	# the version to report. Leave "" or default to return package version.
	version: "2.3333333"

	# Harden against out of zone rrsets, to avoid spoofing attempts.
	harden-glue: yes

	# Sent minimum amount of information to upstream servers to enhance
	# privacy. Only sent minimum required labels of the QNAME and set QTYPE
	# to A when possible.
	qname-minimisation: yes

	# QNAME minimisation in strict mode. Do not fall-back to sending full
	# QNAME to potentially broken nameservers. A lot of domains will not be
	# resolvable when this option in enabled.
	# This option only has effect when qname-minimisation is enabled.
	qname-minimisation-strict: no

	# If nonzero, unwanted replies are not only reported in statistics,
	# but also a running total is kept per thread. If it reaches the
	# threshold, a warning is printed and a defensive action is taken,
	# the cache is cleared to flush potential poison out of it.
	# A suggested value is 10000000, the default is 0 (turned off).
	unwanted-reply-threshold: 10000000

	# if yes, the above default do-not-query-address entries are present.
	# if no, localhost can be queried (for testing and debugging).
	do-not-query-localhost: no

	# if yes, perform prefetching of almost expired message cache entries.
	prefetch: yes

	# if yes, Unbound rotates RRSet order in response.
	rrset-roundrobin: yes

	# if yes, Unbound doesn't insert authority/additional sections
	# into response messages when those sections are not required.
	minimal-responses: yes

	# module configuration of the server. A string with identifiers
	# separated by spaces. Syntax: "[dns64] [validator] iterator"
	# most modules have to be listed at the beginning of the line,
	# except cachedb(just before iterator), and python (at the beginning,
	# or, just before the iterator).
	# module-config: "validator iterator"
	module-config: "subnetcache iterator"

	# File with trusted keys for validation. Specify more than one file
	# with several entries, one file per entry.
	# Zone file format, with DS and DNSKEY entries.
	# Note this gets out of date, use auto-trust-anchor-file please.
	trust-anchor-file: /etc/unbound/trusted-key.key

	# the amount of memory to use for the negative cache (used for DLV).
	# plain value in bytes or you can append k, m or G. default is "1Mb".
	neg-cache-size: 20m


	send-client-subnet: 0.0.0.0/0
	send-client-subnet: ::0/64
	#client-subnet-always-forward: yes

forward-zone:
	name: "."
	forward-addr: 127.0.0.1@5353
